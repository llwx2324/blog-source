// 优化的搜索框样式

#search-form-wrap
  position: absolute
  top: 100%
  right: 0
  width: 300px
  max-width: 90vw
  opacity: 0
  visibility: hidden
  transform: translateY(-10px)
  transition: all 0.3s ease
  z-index: 1000
  margin-top: 5px
  
  &.on
    opacity: 1
    visibility: visible
    transform: translateY(0)
  
  @media mq-mobile
    width: calc(100vw - 20px)
    right: -100vw
    &.on
      right: 10px

.search-form
  position: relative
  background: #fff
  border-radius: 10px
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15)
  overflow: hidden

#search-input
  width: 100%
  padding: 12px 40px 12px 15px
  border: 2px solid #e0e0e0
  border-radius: 10px 10px 0 0
  font-size: 14px
  outline: none
  transition: all 0.3s ease
  background: #f8f9fa
  box-sizing: border-box
  
  &:focus
    border-color: #4a9ff5
    background: #fff
    box-shadow: inset 0 0 0 1px rgba(74, 159, 245, 0.2)
  
  &::placeholder
    color: #999
  
  // 美化浏览器自带的清除按钮
  &::-webkit-search-cancel-button
    -webkit-appearance: none
    appearance: none
    height: 16px
    width: 16px
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23999'%3E%3Cpath d='M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/%3E%3C/svg%3E")
    background-size: 16px 16px
    background-repeat: no-repeat
    cursor: pointer
    margin-right: 10px
    &:hover
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23333'%3E%3Cpath d='M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/%3E%3C/svg%3E")
  &::-ms-clear
    display: none

// 搜索图标
.search-form:after
  content: '\f002'
  font-family: FontAwesome, 'Fork Awesome'
  position: absolute
  right: 15px
  top: 14px
  color: #999
  font-size: 14px
  pointer-events: none

// 搜索结果列表
#search-results
  display: none
  position: relative
  background: #fff
  list-style: none
  margin: 0
  padding: 8px 0
  max-height: 350px
  overflow-y: auto
  border-radius: 0 0 10px 10px
  
  &::-webkit-scrollbar
    width: 6px
  
  &::-webkit-scrollbar-track
    background: #f1f1f1
    border-radius: 3px
  
  &::-webkit-scrollbar-thumb
    background: #ccc
    border-radius: 3px
    
    &:hover
      background: #999

// 搜索结果项
.search-result-item
  padding: 10px 15px
  margin: 2px 8px
  border-radius: 6px
  transition: all 0.2s ease
  cursor: pointer
  
  &:hover
    background: #f8f9fa
  
  a
    text-decoration: none
  
  .search-result-title
    display: block
    font-size: 14px
    font-weight: 600
    color: #333
    margin-bottom: 5px
    line-height: 1.4
    transition: color 0.2s ease
    
    &:hover
      color: #4a9ff5
  
  .search-result-excerpt
    font-size: 12px
    color: #666
    line-height: 1.5
    margin: 0
    display: -webkit-box
    -webkit-line-clamp: 2
    -webkit-box-orient: vertical
    overflow: hidden

// 加载中
.search-loading
  text-align: center
  padding: 30px 20px
  color: #999
  font-size: 14px

// 无结果
.search-no-result
  text-align: center
  padding: 40px 20px
  color: #999
  font-size: 14px

// 更多信息
.search-more-info
  text-align: center
  padding: 12px 20px
  color: #999
  font-size: 12px
  border-top: 1px solid #eee
  margin-top: 5px

// 关键词高亮
.search-keyword
  color: #4a9ff5
  font-weight: 600
  background: rgba(74, 159, 245, 0.15)
  padding: 2px 5px
  border-radius: 3px
  font-style: normal

// 移动端适配
@media mq-mobile
  #search-form-wrap
    width: calc(100vw - 20px)
    max-height: 80vh
    
    &.on
      right: 10px
  
  #search-input
    font-size: 16px // 防止iOS自动缩放
  
  #search-results
    max-height: calc(80vh - 70px)

// 暗色模式支持
@media (prefers-color-scheme: dark)
  .search-form
    background: #2d2d2d
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4)
  
  #search-input
    background: #3a3a3a
    border-color: #555
    color: #ddd
    
    &:focus
      background: #2d2d2d
      border-color: #4a9ff5
    
    &::placeholder
      color: #888
  
  #search-results
    background: #2d2d2d
    
    &::-webkit-scrollbar-track
      background: #3a3a3a
    
    &::-webkit-scrollbar-thumb
      background: #555
      
      &:hover
        background: #666
  
  .search-result-item
    &:hover
      background: #3a3a3a
    
    .search-result-title
      color: #ddd
      
      &:hover
        color: #4a9ff5
    
    .search-result-excerpt
      color: #999
  
  .search-loading,
  .search-no-result,
  .search-more-info
    color: #888
  
  .search-keyword
    background: rgba(74, 159, 245, 0.25)
